---
layout: post
title: "三种插入语句区别"
categories: [RDBMS]
description:
keywords:
---

* content
{:toc}




## insert into

表示插入数据, 数据库会检查主键(PrimaryKey), 如果出现重复会报错



## replace into

表示插入替换数据, 需求表中有 PrimaryKey, 或者 unique 索引的话, 如果数据库已经存在数据, 则用新数据替换, 如果没有数据效果则和 insert into 一样; 
REPLACE 语句会返回一个数, 来指示受影响的行的数目. 该数是被删除和被插入的行数的和. 如果对于一个单行 REPLACE 该数为 1, 则一行被插入, 同时没有行被删除. 如果该数大于 1, 则在新行被插入前, 有一个或多个旧行被删除. 如果表包含多个唯一索引, 并且新行复制了在不同的唯一索引中的不同旧行的值, 则有可能是一个单一行替换了多个旧行. 



## insert ignore

如果中已经存在相同的记录, 则忽略当前新数据



```sql
create table testtb(
  id int not null primary key,
  name varchar(50),
  age int
);
insert into testtb(id,name,age)values(1,"bb",13);
select * from testtb;
insert ignore into testtb(id,name,age)values(1,"aa",13);
select * from testtb;//仍是1，“bb”,13，因为id是主键，出现主键重复但使用了ignore则错误被忽略
replace into testtb(id,name,age)values(1,"aa",12);
select * from testtb; //数据变为1,"aa",12
```

