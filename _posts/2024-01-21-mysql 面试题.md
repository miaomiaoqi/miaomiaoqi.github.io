---
layout: post
title: mysql 面试题
categories: [mysql]
description: 
keywords: 
---

* content
{:toc}


## Mysql索引

### 001 Mysql如何实现的索引机制？

MySQL中索引分三类：B+树索引、Hash索引、全文索引

### 002 InnoDB索引与MyISAM索引实现的区别是什么？

MyISAM的索引方式都是非聚簇的，与InnoDB包含1个聚簇索引是不同的。

*   在InnoDB存储引擎中，我们只需要根据主键值对聚簇索引进行一次查找就能找到对应的记录，而在MyISAM中却需要进行一次回表操作，意味着MyISAM中建立的索引相当于全部都是二级索引 。

*   InnoDB的数据文件本身就是索引文件，而MyISAM索引文件和数据文件是分离的 ，索引文件仅保存数据记录的地址。

    *   MyISAM的表在磁盘上存储在以下文件中： *.sdi（描述表结构） 、*.MYD（数据） ，*.MYI（索引）

    *   InnoDB的表在磁盘上存储在以下文件中： .ibd（表结构、索引和数据都存在一起）

*   InnoDB的非聚簇索引data域存储相应记录主键的值 ，而MyISAM索引记录的是地址 。换句话说，InnoDB的所有非聚簇索引都引用主键作为data域。

*   MyISAM的回表操作是十分快速的，因为是拿着地址偏移量直接到文件中取数据的，反观InnoDB是通过获取主键之后再去聚簇索引里找记录，虽然说也不慢，但还是比不上直接用地址去访问。

*   InnoDB要求表必须有主键 （ MyISAM可以没有 ）。如果没有显式指定，则MySQL系统会自动选择一个可以非空且唯一标识数据记录的列作为主键。如果不存在这种列，则MySQL自动为InnoDB表生成一个隐含字段作为主键，这个字段长度为6个字节，类型为长整型。

![https://miaomiaoqi.github.io/images/database/mysql/interview/nterview_1.png](https://miaomiaoqi.github.io/images/database/mysql/interview/interview_1.png)

### 003 一个表中如果没有创建索引，那么还会创建B+树吗？

会

*   如果有主键会创建聚簇索引

*   如果没有主键会生成rowid作为隐式主键

### 004 说一下B+树索引实现原理（数据结构）

假设有一个表index_demo，表中有2个INT类型的列，1个CHAR(1)类型的列，c1列为主键：

```sql
CREATE TABLE index_demo(c1 INT,c2 INT,c3 CHAR(1),PRIMARY KEY(c1)) ;
```

index_demo表的简化的行格式示意图如下：











![https://miaomiaoqi.github.io/images/database/mysql/interview/nterview_.png](https://miaomiaoqi.github.io/images/database/mysql/interview/interview_.png)

